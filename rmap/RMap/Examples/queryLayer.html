<!DOCTYPE html>
<html>

	<head>
		<title>查询</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<script src="http://192.168.200.100:8020/RunMapAPI/develop/RMap/RMap.js"></script>
		<style type="text/css">
			body {
				padding: 0;
				margin: 0;
				height: 100%;
			}
			.map {
				position:absolute;
				height: 100%;
				right:0;
				left:0;
			}
			.menuBar {
				position: relative;
				top: 10px;
				left: 50px;
				width: 800px;
				z-index:9999;
			}
		</style>
	</head>

	<body>
		<div id="map" class="map"></div>
		<div class="menuBar" style="padding-top: 0;">
			<input type="button" value="查询" onclick="queryBtnClick()" />
			<input type="button" value="清除查询结果" onclick="removeQuery()" />
		</div>
	</body>
	<script>
		//初始化地图
		var rmap = new RMap.Map('map',{
			type:['NNMap_DX'],
			center:[108.37, 22.83],
			zoom:1
		});
		rmap.showCoordinate({
			left: 20
		});
		//查询
		function queryBtnClick() {
			var pointList = [
				[108.37, 22.86],
				[108.37, 22.73],
				[108.57, 22.73]
			];
			rmap.addPolygon(pointList); //简单调用
			
			rmap.queryLayer("NNMap_DX_SXTL", {
//				queryWhere:"SUBTYPE='11'",
				queryPointList:pointList,//几何查询条件
				geoQueryType:"intersects",//几何查询条件类型（相交：intersects，包含：within）
				onClick:onClick,
				onResult:onResult
			})
		};
		
		function removeQuery(){
			rmap.removeQueryResult();
		}
		
		function onClick(e) {
			debugger;
		}
		function onResult(e){
//			debugger;
		}
	</script>

</html>